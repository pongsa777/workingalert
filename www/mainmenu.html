<html>

<head>
    <link href="css/mainmenu.css" rel="stylesheet">
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/roboto.min.css" rel="stylesheet">
    <link href="css/material.min.css" rel="stylesheet">
    <link href="css/ripples.min.css" rel="stylesheet">
</head>

<body>

    <header class="shadow-z-2">
        <div id="hamburger-menu">
            <img src="pic/hamburger-menu.png" class="sidebar-toggle" width="40px">
        </div>
        <div id="title">
            <bold>Your Groups</bold>
        </div>
        <a href="creategroup.html">
            <div id="new-group">
                <img src="pic/addicn.png" class="right-menu-icon" width="32px" style="margin-top:10px">
            </div>
        </a>
        <a href="searchgroup.html">
            <div id="search-group">
                <img src="pic/searchicn.png" class="right-menu-icon" width="40px">
            </div>
        </a>
    </header>
    <div style="margin-top:54px;z-index:1"></div>
    <div class="sidebar-overlay"></div>

    <!-- Material sidebar -->
    <aside id="sidebar" class="sidebar sidebar-default sidebar-fixed-left" role="navigation">
        <!-- Sidebar header -->
        <div class="sidebar-header header-cover" style="background-image: url(pic/nav_bar_bg.png);">
            <!-- Top bar -->
            <div class="top-bar"></div>
            <!-- Sidebar toggle button -->
            <button type="button" class="sidebar-toggle">
                <i class="icon-material-sidebar-arrow"></i>
            </button>
            <!-- Sidebar brand image -->
            <div class="sidebar-image">
                <img src="pic/profile_pic.png">
            </div>
            <!-- Sidebar brand name -->
            <a data-toggle="dropdown" class="sidebar-brand" href="#settings-dropdown">
            {name of user or email}
            <b class="caret"></b>
        </a>
        </div>

        <!-- Sidebar navigation -->
        <ul class="nav sidebar-nav">
            <li>
                <a href="#">
                    <i class="sidebar-icon md-inbox"></i> Profile
                </a>
            </li>
            <li>
                <a href="#">
                    <i class="sidebar-icon md-star"></i> Setting
                </a>
            </li>
            <li>
                <a href="#">
                    <i class="sidebar-icon md-send"></i> Help
                </a>
            </li>
            <li id="logoutbtn">
                <a href="#">
                    <i class="sidebar-icon md-drafts"></i> Logout
                </a>
            </li>
            <li class="divider"></li>
            <li>
                <a href="#">
                    <i class="sidebar-icon md-drafts"></i> About
                </a>
            </li>
        </ul>
        <!-- Sidebar divider -->
        <!-- <div class="sidebar-divider"></div> -->

        <!-- Sidebar text -->
        <!--  <div class="sidebar-text">Text</div> -->
    </aside>

    <!--<div class="container">-->
    <div class="listgroup" id="listgroup">
        <!--
        <div class="group">
            <a href="groupmsg.html">
                <div class="detail">
                    <h1>WIP Camp</h1>
                    <h4>datetime</h4>
                    <input type="hidden" value="'+groupid+'" id="groupid">
                </div>
            </a>
            <div class="widget">
                <p><img src="pic/star_active.png"></p>
                <p><img src="pic/dot_menu.png"></p>
            </div>
            <div style="clear:both;"></div>
            <div class="seperate"></div>
        </div>
        -->
    </div>
    <!--</div listgroup>-->



    <!-- end of html -->
    <script src="js/jquery.min.js"></script>
    <script src="js/bootstrap.js"></script>
    <script type="text/javascript" src="cordova.js"></script>
    <script>
        $(document).ready(function() {
            var overlay = $('.sidebar-overlay');

            $('.sidebar-toggle').on('click', function() {
                var sidebar = $('#sidebar');
                sidebar.toggleClass('open');
                if ((sidebar.hasClass('sidebar-fixed-left') || sidebar.hasClass('sidebar-fixed-right')) && sidebar.hasClass('open')) {
                    overlay.addClass('active');
                } else {
                    overlay.removeClass('active');
                }
            });

            overlay.on('click', function() {
                $(this).removeClass('active');
                $('#sidebar').removeClass('open');
            });

        });

        // Sidebar constructor
        //
        // -------------------
        $(document).ready(function() {

            var sidebar = $('#sidebar');
            var sidebarHeader = $('#sidebar .sidebar-header');
            var sidebarImg = sidebarHeader.css('background-image');
            var toggleButtons = $('.sidebar-toggle');




            // Sidebar position
            $('#sidebar-position').change(function() {
                var value = $(this).val();
                sidebar.removeClass('sidebar-fixed-left sidebar-fixed-right sidebar-stacked').addClass(value).addClass('open');
                if (value == 'sidebar-fixed-left' || value == 'sidebar-fixed-right') {
                    $('.sidebar-overlay').addClass('active');
                }
                // Show toggle buttons
                if (value != '') {
                    toggleButtons.css('display', 'initial');
                    $('body').css('display', 'initial');
                } else {
                    // Hide toggle buttons
                    toggleButtons.css('display', 'none');
                    $('body').css('display', 'table');
                }
            });

            // Sidebar theme
            $('#sidebar-theme').change(function() {
                var value = $(this).val();
                sidebar.removeClass('sidebar-default sidebar-inverse sidebar-colored sidebar-colored-inverse').addClass(value)
            });

            // Header cover
            $('#sidebar-header').change(function() {
                var value = $(this).val();

                $('.sidebar-header').removeClass('header-cover').addClass(value);

                if (value == 'header-cover') {
                    sidebarHeader.css('background-image', sidebarImg)
                } else {
                    sidebarHeader.css('background-image', '')
                }
            });
        });

        /**
         * backend script generate list.
         *
         * 
         */
        $(document).ready(function() {
            sessionid = localStorage.getItem("sessionid");
            localStorage.removeItem('parentgroupid');
            var url = "http://workingalert.tk/api/getgroup.php?sessionid=" + sessionid;
            alert(url);
            $.get(url, function(data, status) {
                alert(JSON.stringify(data));
                if (data.status == 'success') {
                    for (var i = 0; i < data.group.length; i++) {
                        var groupid = data.group[i].id;
                        var name = data.group[i].name;
                        var desc = data.group[i].description;
                        var date = data.group[i].date;
                        var div = document.createElement('div');
                        div.className = 'group';
                        div.innerHTML = '<div class="detail ' + i + '"><h1>' + name + '</h1><h4>' + date + '</h4><input type="hidden" value="' + groupid + '" id="groupid' + i + '"></div><div class="widget"><p><img src="pic/star_inactive.png"></p><p><img src="pic/dot_menu.png"></p></div><div style="clear:both;"></div><div class="seperate"></div>';
                        document.getElementById('listgroup').appendChild(div);
                    }
                }
            });

            $(document).on("click", ".detail", function() {
                var pos = $(this).attr("class").replace("detail ", "");
                localStorage.setItem("parentgroupid", $(".detail." + pos + " #groupid" + pos).val());
                document.location.href = "groupmsg.html";
            });
            
           $("#logoutbtn").on("click", function(e) {
                alert('You are now logged out from application');
                localStorage.clear();
                navigator.app.exitApp();
           });
        });



        /**
         * Created by Kupletsky Sergey on 08.09.14.
         *
         * Add JQuery animation to bootstrap dropdown elements.
         */

        (function($) {
            var dropdown = $('.dropdown');

            // Add slidedown animation to dropdown
            dropdown.on('show.bs.dropdown', function(e) {
                $(this).find('.dropdown-menu').first().stop(true, true).slideDown();
            });

            // Add slideup animation to dropdown
            dropdown.on('hide.bs.dropdown', function(e) {
                $(this).find('.dropdown-menu').first().stop(true, true).slideUp();
            });
        })(jQuery);



        (function(removeClass) {

            jQuery.fn.removeClass = function(value) {
                if (value && typeof value.test === "function") {
                    for (var i = 0, l = this.length; i < l; i++) {
                        var elem = this[i];
                        if (elem.nodeType === 1 && elem.className) {
                            var classNames = elem.className.split(/\s+/);

                            for (var n = classNames.length; n--;) {
                                if (value.test(classNames[n])) {
                                    classNames.splice(n, 1);
                                }
                            }
                            elem.className = jQuery.trim(classNames.join(" "));
                        }
                    }
                } else {
                    removeClass.call(this, value);
                }
                return this;
            }

        })(jQuery.fn.removeClass);

    </script>
</body>

</html>
